#! /bin/bash

do_mute() {
    pactl set-sink-mute $(pactl info | grep Sink | cut -d ' ' -f 3) 'toggle'
}

do_up() {
    step="$1" 
    cur_vol="$(pactl get-sink-volume $(pactl info | grep Sink | cut -d ' ' -f 3) | cut -d "/" -f 2 | head -n 1 | grep -oP "\d+")"
    new_vol=$(echo "${cur_vol}+${step}" | bc)

    echo "Change volume to ${new_vol}"

    pactl set-sink-volume $(pactl info | grep Sink | cut -d ' ' -f 3) "${new_vol}%"
}

do_down() {
    step="$1" 
    cur_vol="$(pactl get-sink-volume $(pactl info | grep Sink | cut -d ' ' -f 3) | cut -d "/" -f 2 | head -n 1 | grep -oP "\d+")"
    new_vol=$(echo "${cur_vol}-${step}" | bc)

    echo "Change volume to ${new_vol}"

    pactl set-sink-volume $(pactl info | grep Sink | cut -d ' ' -f 3) "${new_vol}%"
}

command="$1"
param="$2"

case "$command" in
    "mute") do_mute;;
    "up") do_up ${param};;
    "down") do_down ${param};;
esac
